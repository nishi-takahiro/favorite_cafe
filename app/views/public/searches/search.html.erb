<h2>Results index</h2>

<!--検索フォーム-->
<div class="search_form">
  <%= form_with url: public_search_path, local: true, method: :get do |f| %>
    <%= f.text_field :word, placeholder: "投稿を検索する" %>
    <%= f.select :range, options_for_select([['Article'], ['User']]) %>
    <%= f.select :search, options_for_select([ ["部分一致","partial_match"],["完全一致","perfect_match"], ["前方一致","forward_match"],  ["後方一致","backward_match"]]) %>
    <%= f.submit "検索", class: "btn btn-primary" %>
  <% end %>
</div>

<table class="table table-hover table-inverse">
  <!--検索対象モデルがArticleの時 -->
 <% if @range == "Article" %>
    <thead>
      <tr>
        <th>投稿日</th>
        <th>投稿者</th>
        <th>店舗名</th>
        <th>店舗住所</th>
        <th>コメント数</th>
      </tr>
    </thead>
    <tbody>
      <% @article.each do |article| %>
        <tr>
           <td>
            <%= article.created_at.strftime('%Y/%m/%d') %>
          </td>
          <td>
            <%= article.user.full_name %>
          </td>
          <td>
            <%= link_to public_store_article_path([article.store],[article]) do %>
            <%= article.store_name %>
            <% end %>
          </td>
          <td><%= article.address %></td>
          <td><%= article.comments.count %></td>
        </tr>
      <% end %>
    </tbody>
  <% elsif @range == "User" %>
    <tbody>
      <!--検索対象モデルがArticleではない時(= 検索対象モデルがUserの時) -->
      <% @user.each do |user| %>
        <tr>
          <td><%= user.full_name %></td>
          <td><%= user.articles.count %></td>
          <td><%= user.likes.count %></td>
        </tr>
      <% end %>
    </tbody>
    
   
  <% end %>
</table>
